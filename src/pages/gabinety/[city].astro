---
import Main from '../../layouts/Main.astro';
import type { Specialization } from '../../types';

interface Props {
    specializations: Specialization[]
}

const response = await fetch('https://mrk-umber.vercel.app//api/specs/1');
const data = await response.json();

const specializations = data as Specialization[];
const {city} = Astro.params;
---


<style>
    header {
        background: var(--primary-color);
        height: var(--header-h);
        display: flex;
        align-items: center;
        padding: 20px;
        color: var(--secondary-color);
    }
    .specializations {
        width: calc(100% + 2px);
        min-height: calc(100vh - var(--header-h));
        display: flex;
        flex-wrap: wrap;
        background: var(--primary-color);
        color: var(--secondary-color);
    }
    .spec:nth-child(n+1) {
        border-right: 2px solid var(--secondary-color);
        border-top: 2px solid var(--secondary-color);
        padding: 20px;
        flex-basis: calc(50% - 1px);
        flex-grow: 1;
        flex-shrink: 1;
    }
    .traits {
        list-style: none;
    }
    .traits li {
        padding: 10px 0px;
    }
</style>
<Main>
    <header>
        <h1>{city}</h1>
    </header>
    <section class="specializations">
        {specializations.map(s => (
            <div class="spec">
                <h2>{s.specName}</h2>
                {s.drs.map(d => (
                    <ul class="traits">
                        <li>{d.room}</li>
                        <li>{d.name}</li>
                        <li>{d.address}</li>
                        <li>{d.phone}</li>
                    </ul>
                ))}
            </div>
        ))}
    </section>
</Main>